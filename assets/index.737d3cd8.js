import{d as e,r as t,o as n,c as s,w as o,a as i,t as l,n as a,b as r,e as c,T as u,_ as p,f as d,g as m,G as f,h as y,i as w,j as x,v,F as h,k,l as b,p as C,m as g,q as S,s as _,u as T,x as L,y as B,z as j,A as I,B as M}from"./index.616cf237.js";import{I as R}from"./index.e706b22d.js";const q=p(e({name:"GInfo",props:{info:{type:Object,default:()=>({show:!1,message:"",duration:3e3,type:P.success,style:""})}},setup(e,{expose:p}){const d=t(e.info);return p({close:e=>{d.show=!1;let t=setTimeout((()=>{e(),clearTimeout(t)}),300)}}),(e,t)=>(n(),s(u,null,{default:o((()=>[d.show?(n(),i("main",{key:0,class:a(["info-container text-center",d.type]),style:r(d.style)},l(d.message),7)):c("",!0)])),_:1}))}}),[["__scopeId","data-v-5545bcfb"]]);var P=(e=>(e[e.success=0]="success",e[e.error=1]="error",e[e.warning=2]="warning",e[e.info=3]="info",e))(P||{});let U,O=[],z=document.createElement("div"),D=document.querySelector("body");function E(e){let t,n=-1;U&&(U=null,m(null,z),z.remove(),clearTimeout(n)),O.push(d(q,{info:e,id:Date.now()})),U=d("div",{class:["flex","flex-col","fixed","w-full","top-0"]},O),m(U,z),null==D||D.appendChild(z),n=setTimeout((()=>{var e,s;t=O.splice(0,1)[0],null==(s=null==(e=t.component)?void 0:e.exposed)||s.close((()=>{if(!O.length)return z.remove()})),clearTimeout(n)}),e.duration)}z.classList.add("flex","flex-col","fixed","w-full","top-0");const F="newest";async function W(e,t=F,n){return await e.setItem(t||F,n)}var A=(e=>(e[e.Birds=1]="Birds",e[e.Cicada=2]="Cicada",e[e.Breeze=3]="Breeze",e[e.Water=4]="Water",e[e.Fire=5]="Fire",e[e.Clock=6]="Clock",e[e.Rain=7]="Rain",e[e.People=8]="People",e[e.Custom=9]="Custom",e))(A||{});const H={Birds:{enum:1,title:"鸟语",text:"决决水泉动，忻忻众鸟鸣。"},Cicada:{enum:2,title:"蝉鸣",text:"蝉鸣空桑林，八月萧关道。"},Breeze:{enum:3,title:"微风",text:"似此星辰非昨夜，为谁风露立中宵。"},Water:{enum:4,title:"流水",text:"素月分辉，明河共影，表里俱澄澈。"},Fire:{enum:5,title:"柴火",text:"绿蚁新醅酒，红泥小火炉。"},Clock:{enum:6,title:"钟声",text:"行到水穷处，坐看云起时。"},Rain:{enum:7,title:"雨声",text:"空山新雨后，天气晚来秋。"},People:{enum:8,title:"人声",text:"知者动，仁者静。"},Custom:{enum:9,title:"自定",text:"随意春芳歇，王孙自可留。"}},V=[{type:H.Birds,link:"https://cdn.freesound.org/previews/387/387978_6221013-lq.mp3",text:"忻忻众鸟鸣"},{type:H.Water,link:"https://cdn.freesound.org/previews/442/442492_5902878-lq.mp3",text:"明河共影"},{type:H.Fire,link:"https://cdn.freesound.org/previews/378/378641_7023777-lq.mp3",text:"红泥小火炉"},{type:H.Cicada,link:"https://cdn.freesound.org/previews/400/400331_5121236-lq.mp3",text:"蝉鸣空桑林"},{type:H.Breeze,link:"https://cdn.freesound.org/previews/181/181801_3153523-lq.mp3",text:"为谁风露立中宵"},{type:H.Clock,link:"https://cdn.freesound.org/previews/530/530583_7707368-lq.mp3",text:"云起时"},{type:H.Rain,link:"https://cdn.freesound.org/previews/531/531947_7707368-lq.mp3",text:"空山新雨后"},{type:H.People,link:"https://cdn.freesound.org/previews/625/625112_12946258-lq.mp3",text:"知者动"},{type:H.People,link:"https://cdn.freesound.org/previews/339/339983_5984982-lq.mp3",text:"仁者静"}];let G=t([]);const X=t([]);function J(e){X.splice(e,1)}function N(e){G.push(e),W(f.SOURCE_DB,"",y(G))}function $(){W(f.SOURCE_DB,"",V),G=t(V),E({message:"已恢复",duration:3e3,type:"info",show:!0})}async function K(){let e=await async function(e,t=F){return await e.getItem(t||F)}(f.SOURCE_DB),t=[...V];return G=e,e&&e.length?e:(W(f.SOURCE_DB,"",t),G=t,t)}const Q=e=>(C("data-v-7d74c6b9"),e=e(),g(),e),Y={key:0,class:"custom-source-container flex items-center justify-center"},Z={class:"custom-box"},ee={class:"item"},te=Q((()=>w("span",{class:"title"},"归属:",-1))),ne=["value"],se={class:"item"},oe=Q((()=>w("span",{class:"title"},"链接:",-1))),ie={class:"item"},le=Q((()=>w("span",{class:"title"},"名字:",-1))),ae={class:"flex justify-between mt-8"},re=p(e({name:"CustomSourceComp",emits:["add-source-list"],setup(e,{expose:a,emit:r}){const p=t({show:!1,val:{link:"",type:H.Custom,text:""},types:H}),d=()=>{r("add-source-list",p.val),p.show=!1,p.val={link:"",type:H.Custom,text:""},E({message:"已添加",type:"info",duration:2e3,show:!0})};return a({pgInfo:p}),(e,t)=>(n(),s(u,null,{default:o((()=>[p.show?(n(),i("main",Y,[p.show?(n(),i("div",{key:0,class:"modal",onClick:t[0]||(t[0]=e=>p.show=!1)})):c("",!0),w("div",Z,[w("div",ee,[te,x(w("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>p.val.type=e)},[(n(!0),i(h,null,k(p.types,(e=>(n(),i("option",{key:e.enum,value:e},l(e.title),9,ne)))),128))],512),[[v,p.val.type]])]),w("div",se,[oe,x(w("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>p.val.link=e),type:"text",placeholder:"请输入链接"},null,512),[[b,p.val.link]])]),w("div",ie,[le,x(w("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>p.val.text=e),type:"text",placeholder:"指定一个名称"},null,512),[[b,p.val.text]])]),w("div",ae,[w("div",{class:"cursor-pointer",onClick:t[4]||(t[4]=e=>p.show=!1)},"无事"),w("div",{class:"cursor-pointer",onClick:d},"确认")])])])):c("",!0)])),_:1}))}}),[["__scopeId","data-v-7d74c6b9"]]),ce={class:"side-menu-container"},ue={class:"trigger-box flex justify-end"},pe={class:"side-menu-box"},de={class:"play-list-box"},me={class:"flex justify-between items-center",style:{width:"100%"}},fe=["src"],ye={class:"add-your-source-box flex justify-between"},we=p(e({name:"SideMenuComp",setup(e,{expose:s}){const a=t({showMenu:!1,playList:X});return s({pgInfo:a}),(e,t)=>{const s=S("svg-icon");return n(),i("main",ce,[a.showMenu?(n(),i("div",{key:0,class:"modal",onClick:t[0]||(t[0]=e=>a.showMenu=!1)})):c("",!0),w("div",ue,[d(s,{name:a.showMenu?"close":"open",class:"cursor-pointer",onClick:t[1]||(t[1]=e=>a.showMenu=!a.showMenu)},null,8,["name"])]),d(u,null,{default:o((()=>[x(w("div",pe,[w("div",de,[d(T,null,{default:o((()=>[(n(!0),i(h,null,k(a.playList,((e,t)=>(n(),i("div",{key:e.link,class:"play-item flex flex-col items-start justify-between flex-wrap"},[w("div",me,[w("span",null,l(e.text),1),d(s,{name:"close",class:"cursor-pointer",onClick:e=>L(J)(t)},null,8,["onClick"])]),w("audio",{src:e.link,loop:"",autoplay:"",controls:""},null,8,fe)])))),128))])),_:1})]),w("div",ye,[w("span",{class:"cursor-pointer",onClick:t[2]||(t[2]=t=>e.$emit("show-custom-box"))},"添加音源"),w("span",{class:"cursor-pointer",onClick:t[3]||(t[3]=(...e)=>L($)&&L($)(...e))},"恢复预设")])],512),[[_,a.showMenu]])])),_:1})])}}}),[["__scopeId","data-v-1739c188"]]),xe={class:"source-type-list-container flex justify-between"},ve={key:0,class:"source-box flex items-center"},he=["onClick"],ke={class:"type-box flex justify-between"},be=["onClick"],Ce={class:"title text-2xl"},ge={class:"text"},Se=p(e({name:"SourceListComp",props:{playList:{type:Array,default:[]}},emits:["show-side-menu-box"],setup(e,{emit:s}){const a=t({showTypeList:!0,sourceTypeList:H,audioSourceList:[],curType:{}}),r=e=>{var t;s("show-side-menu-box"),t=e,X.push(t)},p=e=>{if(a.curType=e,a.audioSourceList=function(e){return G.filter((t=>t.type.enum===e.enum))}(e),a.showTypeList=!a.audioSourceList.length,!a.audioSourceList.length)return E({message:"空空如也",type:"info",show:!0,duration:1e3})};return B((()=>K())),(e,t)=>{const s=S("svg-icon");return n(),i("main",xe,[a.showTypeList?c("",!0):(n(),i("div",{key:0,class:"modal",onClick:t[0]||(t[0]=e=>a.showTypeList=!0)})),d(u,null,{default:o((()=>[a.audioSourceList.length&&!a.showTypeList?(n(),i("div",ve,[d(s,{name:"close",class:"cursor-pointer text-white fill-white icon",onClick:t[1]||(t[1]=e=>a.showTypeList=!0)},{default:o((()=>[j("close")])),_:1}),(n(!0),i(h,null,k(a.audioSourceList,(e=>(n(),i("div",{key:e.link,class:"source-item cursor-pointer",onClick:I((t=>r(e)),["prevent"])},[d(s,{name:"close",class:"icon",onClick:I((t=>(e=>{let t=G.map(((t,n)=>{if(t.link===e.link)return n}));if(t.length){for(const e of t)-1!==(n=void 0===e?-1:e)&&(G.splice(n,1),W(f.SOURCE_DB,"",y(G)));var n;p(a.curType),E({message:"已移除",type:"info",show:!0,duration:1e3})}})(e)),["stop"])},null,8,["onClick"]),j(" "+l(e.text),1)],8,he)))),128))])):c("",!0)])),_:1}),d(u,null,{default:o((()=>[x(w("div",ke,[(n(!0),i(h,null,k(a.sourceTypeList,(e=>(n(),i("div",{key:e.enum,class:"type-item",onClick:t=>p(e)},[w("span",Ce,l(e.title),1),w("pre",ge,l(e.text),1)],8,be)))),128))],512),[[_,a.showTypeList]])])),_:1})])}}}),[["__scopeId","data-v-e68e05b1"]]),_e="jinrishici-token";function Te(e,t){return window.localStorage&&window.localStorage.getItem(_e)?function(e,t,n){return Le(e,t,"https://v2.jinrishici.com/one.json?client=npm-sdk/1.0&X-User-Token="+encodeURIComponent(n))}(e,t,window.localStorage.getItem(_e)):function(e,t){return Le((function(t){window.localStorage.setItem(_e,t.token),e(t)}),t,"https://v2.jinrishici.com/one.json?client=npm-sdk/1.0")}(e,t)}function Le(e,t,n){var s=new XMLHttpRequest;s.open("get",n),s.withCredentials=!0,s.send(),s.onreadystatechange=function(){if(4===s.readyState){var n=JSON.parse(s.responseText);"success"===n.status?e(n):t&&t(n)}}}const Be=[{content:"\n仲春时景好，草木渐舒荣。公门且无事，微雨园林清。<br/>\n决决水泉动，忻忻众鸟鸣。闲斋始延瞩，东作兴庶氓。<br/>\n即事玩文墨，抱冲披道经。于焉日淡泊，徒使芳尊盈。<br/>\n            ",audioSourceType:A.Birds},{content:"\n绿蚁新醅酒，红泥小火炉。<br/>\n晚来天欲雪，能饮一杯无？<br/>\n",audioSourceType:A.Fire},{content:"\n蝉鸣空桑林，八月萧关道。<br/>\n出塞入塞寒，处处黄芦草。<br/>\n从来幽并客，皆共尘沙老。<br/>\n莫学游侠儿，矜夸紫骝好。<br/> \n",audioSourceType:A.Cicada},{content:"\n空山新雨后，天气晚来秋。<br/>\n明月松间照，清泉石上流。<br/>\n竹喧归浣女，莲动下渔舟。<br/>\n随意春芳歇，王孙自可留。<br/> \n            ",audioSourceType:A.Rain},{content:"\n洞庭青草，近中秋，更无一点风色。<br/>\n玉鉴琼田三万顷，着我扁舟一叶。<br/>\n素月分辉，明河共影，表里俱澄澈。<br/>\n悠然心会，妙处难与君说。<br/>\n            ",audioSourceType:A.Water},{content:"\n中岁颇好道，晚家南山陲。<br/>\n兴来每独往，胜事空自知。<br/>\n行到水穷处，坐看云起时。<br/>\n偶然值林叟，谈笑无还期。<br/> \n            ",audioSourceType:A.Clock},{content:"\n几回花下坐吹箫，银汉红墙入望遥。<br/>\n似此星辰非昨夜，为谁风露立中宵。<br/>\n缠绵思尽抽残茧，宛转心伤剥后蕉。<br/>\n三五年时三五月，可怜杯酒不曾消。<br/>\n            ",audioSourceType:A.Breeze},{content:"\n知者乐水，仁者乐山。<br/>\n知者动，仁者静。<br/>\n知者乐，仁者寿。<br/>\n            ",audioSourceType:A.People}];const je={class:"poem-container flex"},Ie=["innerHTML"],Me=p(e({name:"PoemComp",setup(e){const s=t({poem:{}});return B((()=>function(e){let n=Be.length-1;Te((t=>{e.poem={audioSourceType:A.Custom,content:t.data.origin.content.join("<br/>")},Promise.resolve(e)}),(s=>{e.poem=t(Be[Math.floor(Math.random()*(n-0+1)+0)]),Promise.resolve(e)}))}(s))),(e,t)=>(n(),i("main",je,[w("div",{innerHTML:s.poem.content},null,8,Ie)]))}}),[["__scopeId","data-v-9558d2b1"]]),Re={class:"main-container flex flex-col justify-end text-white"},qe=p(e({name:"HomePage",setup(e){t({playList:X});let s=N,o=M(),l=M(),a=()=>{o.value&&(o.value.pgInfo.show=!0)},r=()=>{l.value&&(l.value.pgInfo.showMenu=!0)};return(e,t)=>(n(),i("main",Re,[d(we,{ref_key:"sideMenuCompRef",ref:l,onShowCustomBox:L(a)},null,8,["onShowCustomBox"]),d(Me),d(Se,{onShowSideMenuBox:L(r)},null,8,["onShowSideMenuBox"]),d(R),d(re,{ref_key:"customCompRef",ref:o,onAddSourceList:L(s)},null,8,["onAddSourceList"])]))}}),[["__scopeId","data-v-554fe66c"]]);export{qe as default};
